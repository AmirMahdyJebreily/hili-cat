# هایلی-کت - ابزار هایلایت سینتکس سبک برای لینوکس

هایلی-کت یه ابزار کامندلاین سبک و بهینه‌شده برای هایلایت کردن کد هست که با زبان Go نوشته شده. این برنامه جایگزین قدرتمندی برای دستور `cat` با قابلیت هایلایت سینتکس هست که مخصوص سیستم‌عامل لینوکس طراحی شده.

## ویژگی‌ها

- **کارایی بالا:** از معماری پایپلاین دو گوروتین برای حداکثر سرعت استفاده می‌کنه
- **قابلیت توسعه:** از قواعد هایلایت سینتکس سفارشی با کانفیگ JSON پشتیبانی می‌کنه
- **وابستگی‌های حداقلی:** فقط از کتابخونه‌های استاندارد Go استفاده می‌کنه
- **تشخیص خودکار زبان:** براساس پسوند فایل‌ها
- **پشتیبانی از پایان خط:** هر دو فرمت LF و CRLF رو پشتیبانی می‌کنه
- **پشتیبانی از stdin:** قابل استفاده در پایپ‌های کامندلاین
- **سازگاری با `cat`:** از فلگ‌های معمول cat مثل `-n`، `-b`، `-s`، و `-E` پشتیبانی می‌کنه
- **پشتیبانی از چندین زبان:** شامل پشتیبانی داخلی برای Go، Python، JavaScript، JSON، Markdown، XML/HTML و SQL
- **تمرکز روی امنیت:** از عملیات syscall سطح پایین برای I/O فایل استفاده می‌کنه
- **صفحه‌بندی داخلی:** با فلگ `--less` می‌تونی فایل‌های بزرگ رو با پیجر `less` ببینی

## نصب

### نیازمندی‌های سیستم

- **سیستم‌عامل**: فقط لینوکس (با macOS یا Windows سازگار نیست)
- **وابستگی‌ها**: 
  - Go 1.18+ (برای بیلد از سورس)
  - دستور `less` (برای عملکرد فلگ `--less`)

```bash
# نصب از سورس
git clone https://github.com/AmirMahdyJebreily/hili-cat.git
cd hili-cat
./build.sh

# یا استفاده از باینری آماده از ریلیزها
wget https://github.com/AmirMahdyJebreily/hili-cat/releases/download/pre-release0.0.1/hili-cat-linux-amd64
chmod +x hili-cat-linux-amd64
sudo mv hili-cat-linux-amd64 /usr/local/bin/hili-cat
```

## استفاده

```bash
# هایلایت کردن یک فایل با تشخیص خودکار زبان
hili-cat main.go

# هایلایت کردن چندین فایل
hili-cat file1.go file2.go

# هایلایت کردن ورودی استاندارد با زبان مشخص
cat main.go | hili-cat --lang go

# استفاده از فایل کانفیگ سفارشی
hili-cat --config /path/to/config.json main.py

# مشخص کردن فرمت پایان خط
hili-cat --line-ending crlf file.go

# نمایش شماره خط (مشابه cat -n)
hili-cat -n file.go

# نمایش شماره خط فقط برای خطوط غیر خالی (مشابه cat -b)
hili-cat -b file.go

# فشرده کردن خطوط خالی تکراری (مشابه cat -s)
hili-cat -s file.go

# نمایش پایان خط با علامت $ (مشابه cat -E)
hili-cat -E file.go

# نمایش فایل هایلایت شده با صفحه‌بندی
hili-cat --less file.go
```

## پیکربندی

فایل پیکربندی پیش‌فرض در `/etc/highlight/config.json` قرار دارد (این مسیر هنگامی که برنامه برای اولین بار اجرا می‌شود، به طور خودکار ایجاد می‌شود).

شما می‌توانید فایل پیکربندی سفارشی خود را با قوانین برجسته‌سازی نحو برای زبان‌های مختلف برنامه‌نویسی ایجاد کنید. فایل پیکربندی از قالب JSON با ساختار زیر استفاده می‌کند:

```json
{
  "languages": {
    "language-name": {
      "extensions": ["ext1", "ext2"],
      "rules": [
        {
          "name": "rule-name",
          "pattern": "regex-pattern",
          "style": "style-name"
        }
      ],
      "styles": {
        "style-name": "color-name"
      }
    }
  }
}
```

سبک‌های در دسترس شامل:
- سبک‌های متن: `bold`، `italic`، `underline`
- رنگ‌ها: `black`، `red`، `green`، `yellow`، `blue`، `magenta`، `cyan`، `white`
- رنگ‌های روشن: `brightblack`، `brightred`، `brightgreen`، `brightyellow`، `brightblue`، `brightmagenta`، `brightcyan`، `brightwhite`

## معماری

ابزار `hili-cat` از طراحی خط لوله دو goroutine با کارایی بالا استفاده می‌کند:

1. **Goroutine خواننده**: ورودی/خروجی فایل یا stdin را با استفاده از syscall‌های سطح پایین برای حداکثر کارایی مدیریت می‌کند
2. **Goroutine برجسته‌کننده**: داده‌ها را پردازش کرده و برجسته‌سازی نحو را با استفاده از قوانین مبتنی بر عبارات منظم اعمال می‌کند

این رویکرد خط لوله‌ای اجازه جریان کارآمد داده‌ها را می‌دهد، حتی با فایل‌های بزرگ، مصرف حافظه را به حداقل رسانده و در عین حال کارایی بالایی را حفظ می‌کند.

### جریان داده:

```
┌─────────┐     ┌─────────────┐     ┌───────────┐
│ Input   │────▶│ Buffered    │────▶│ Output    │
│ Source  │     │ Channel     │     │ (Stdout)  │
└─────────┘     └─────────────┘     └───────────┘
    │                                    ▲
    │                                    │
    ▼                                    │
┌──────────┐                        ┌─────────────┐
│ Reader   │                        │ Highlighter │
│ Goroutine│                        │ Goroutine   │
└──────────┘                        └─────────────┘
```


## ملاحظات کارایی

`hili-cat` با هدف کارایی به عنوان هدف اصلی طراحی شده است:

- **ورودی/خروجی بافر شده**: از اندازه‌های بافر کارآمد برای عملکرد بهینه خواندن/نوشتن استفاده می‌کند
- **بهینه‌سازی عبارات منظم**: الگوهای عبارات منظم را از قبل کامپایل می‌کند تا استفاده از CPU را به حداقل برساند
- **مدیریت حافظه**: تخصیص‌ها را به حداقل می‌رساند تا سربار GC کاهش یابد
- **استفاده از Syscall**: استفاده مستقیم از syscall برای عملیات فایل به جای انتزاع‌های سطح بالاتر
- **بافرینگ کانال**: کانال‌های با اندازه مناسب برای جلوگیری از انسداد در خط لوله

## مثال‌ها

### استفاده پایه

```bash
# برجسته‌سازی یک فایل Go با تشخیص خودکار زبان
hili-cat main.go
```

### لوله‌کردن از stdin

```bash
# خروجی git diff را به hili-cat برای خروجی diff رنگی منتقل می‌کند
git diff | hili-cat --lang diff
```

### استفاده در اسکریپت‌ها

```bash
# استفاده از hili-cat در یک اسکریپت برای نمایش خروجی با برجسته‌سازی نحو
#!/bin/bash
echo "نمایش کد برجسته‌شده:"
hili-cat --lang go main.go
```

## مشارکت

مشارکت‌ها مورد استقبال قرار می‌گیرند! در اینجا برخی از زمینه‌هایی که به کمک نیاز دارند، آورده شده‌اند:

1. افزودن پشتیبانی برای زبان‌های برنامه‌نویسی بیشتر
2. بهینه‌سازی‌های عملکرد
3. گزینه‌های قالب‌بندی اضافی
4. رفع اشکالات و بهبود تست‌ها

لطفاً از قراردادهای کدنویسی Go پیروی کنید و اطمینان حاصل کنید که کد شما تمام تست‌ها را با موفقیت انجام می‌دهد.

برای اطلاعات دقیق در مورد نحوه مشارکت، لطفاً [راهنمای مشارکت](../en/CONTRIBUTING.md) را مطالعه کنید.

## پیکربندی زبان

`hili-cat` برای گسترش آسان با پشتیبانی از زبان‌های برنامه‌نویسی اضافی طراحی شده است.
برای یادگیری نحوه افزودن پشتیبانی از زبان مورد علاقه‌تان، [راهنمای پیکربندی زبان](../en/CONFIG_GUIDE.md) را ببینید.

## فرآیند انتشار

این پروژه از GitHub Actions برای خودکارسازی ساخت‌ها استفاده می‌کند:
- برچسب `pre-release0.0.1` و هر نسخه با پیشوند `v*` ساخت‌های خودکار را فعال می‌کند
- ساخت‌های لینوکس به طور خودکار ایجاد و به انتشارهای GitHub متصل می‌شوند
- برای جزئیات، فایل گردش کار در `.github/workflows/linux-build.yml` را ببینید

## مجوز

برای جزئیات، فایل [LICENSE](../../LICENSE) را ببینید.

---

[English](README.md) | فارسی
